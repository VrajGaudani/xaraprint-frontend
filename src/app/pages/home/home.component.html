<!-- Blog Banner Slider - Added Above Main Banner -->
<section class="blog-banner-slider" *ngIf="blogBannerList.length > 0">
  <div class="container-fluid px-0">
    <div class="banner-carousel">
      <ngx-slick-carousel [config]="blogBannerSlideConfig" class="blog-banner-carousel">
        <div ngxSlickItem *ngFor="let banner of blogBannerList" class="banner-slide">
          <a [href]="banner.redirectLink" target="_blank" class="banner-link">
            <img [src]="banner.image" [alt]="'Banner ' + banner._id" class="banner-image" />
          </a>
        </div>
      </ngx-slick-carousel>
    </div>
  </div>
</section>

<!-- Hero Banner Section -->
<section class="hero-section">
  <div class="container-fluid px-0">
    <!-- Main Banner Slider -->
    <div class="main-banner-slider">
      <div class="banner-slide position-relative">
        <div class="container">
          <div class="row align-items-center min-vh-60">
            <div class="col-lg-6">
              <div class="hero-content">
                <div class="hero-badge">
                  <i class="bi bi-star-fill me-2"></i>
                  <span>Final Hour 4th of July Preps</span>
                </div>
                <h1 class="hero-title">
                  Up to <span class="text-primary">{{mostValued?.discount_amount}}% OFF</span> sitewide
                </h1>
                <p class="hero-subtitle">Great promotions ensure unlimited savings on custom banners and displays</p>
                <div class="hero-actions">
                  <div class="promo-code-display">
                    <span class="code-label">Code:</span>
                    <span class="code-value">{{mostValued.coupon_code}}</span>
                  </div>
                  <button class="btn btn-primary btn-lg hero-cta">
                    <span>SHOP NOW</span>
                    <i class="bi bi-arrow-right ms-2"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="hero-image">
                <img src="assets/images/hero-banner-main.jpg" alt="Custom Banners" class="img-fluid" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Features Bar -->
<section class="features-section">
  <div class="container">
    <div class="features-grid">
      <div class="feature-card">
        <div class="feature-icon">
          <i class="bi bi-award"></i>
        </div>
        <div class="feature-content">
          <h6 class="feature-title">Premium Quality</h6>
          <span class="feature-subtitle">Products</span>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <i class="bi bi-palette"></i>
        </div>
        <div class="feature-content">
          <h6 class="feature-title">Hire a Designer</h6>
          <span class="feature-subtitle">Services</span>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <i class="bi bi-tag"></i>
        </div>
        <div class="feature-content">
          <h6 class="feature-title">Best Price</h6>
          <span class="feature-subtitle">Guarantee</span>
        </div>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <i class="bi bi-star"></i>
        </div>
        <div class="feature-content">
          <h6 class="feature-title">4.2 ★★★★☆</h6>
          <span class="feature-subtitle">101077 Reviews</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Most Loved Brand Builders - Fixed Card Sizes -->
<section class="brand-builders-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Most Loved Brand Builders</h2>
    </div>
    <div class="brand-grid">
      <div class="brand-item" *ngFor="let item of bestSellings">
        <a [routerLink]="['/product-details', item._id]" class="brand-link">
          <div class="brand-card">
            <div class="brand-image">
              <img [src]="item?.product_images?.[0]" [alt]="item?.productname" />
              <div class="brand-overlay">
                <i class="bi bi-eye"></i>
              </div>
            </div>
            <div class="brand-info">
              <h6 class="brand-name">{{item?.productname}}</h6>
              <div class="brand-rating">
                <div class="rating-stars">
                  <i class="bi bi-star-fill" *ngFor="let star of [1,2,3,4]"></i>
                  <i class="bi bi-star-half"></i>
                </div>
                <span class="rating-text">4.5</span>
                <span class="rating-count">({{item?.rating || 40}})</span>
              </div>
              <div class="brand-price">
                <span class="price-label">Starting at</span>
                <span class="price-value">₹{{item?.price || '29.99'}}</span>
              </div>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Custom Banners Section - Fixed Card Sizes and Proper Category Handling -->
<section class="custom-banners-section-redesigned">
  <div class="container">
    <div class="section-header-redesigned">
      <h2 class="section-title-redesigned">Customize Your Signs & Displays to Unlock Unlimited Opportunities</h2>
      
      <!-- Improved Category Filters with Better Validation and Error Handling -->
      <div class="category-filters-redesigned">
        <div class="filter-row">
          <div class="filter-group-redesigned">
            <label class="filter-label-redesigned">Select Category:</label>
            <select class="form-select category-select-redesigned" 
                    [(ngModel)]="selectedMainCategory" 
                    (change)="onCategoryChange($event)">
              <option value="" disabled>Choose a category</option>
              <option *ngFor="let item of mainCategory" [value]="item?._id">{{item?.name}}</option>
            </select>
          </div>
          
          <div class="filter-group-redesigned">
            <label class="filter-label-redesigned">Select Subcategory:</label>
            <select class="form-select subcategory-select-redesigned" 
                    [(ngModel)]="subCatValue" 
                    (change)="onSubCategoryChange($event)"
                    [disabled]="!selectedMainCategory || isLoadingSubCategories">
              <option value="" disabled>
                {{isLoadingSubCategories ? 'Loading...' : (subCategory.length === 0 ? 'No subcategories available' : 'Choose a subcategory')}}
              </option>
              <option *ngFor="let item of subCategory" [value]="item?._id">{{item?.name}}</option>
            </select>
          </div>
        </div>
        
        <!-- Improved Product Count Display with Proper Validation -->
        <div class="results-info-redesigned">
          <div class="results-count-redesigned" *ngIf="selectedMainCategory">
            <span *ngIf="isLoadingProducts" class="loading-text">
              <i class="bi bi-hourglass-split me-2"></i>Loading products...
            </span>
            <span *ngIf="!isLoadingProducts && customeBannerList.length > 0" class="success-text">
              <i class="bi bi-check-circle me-2"></i>
              Found <strong>{{customeBannerList.length}}</strong> {{customeBannerList.length === 1 ? 'product' : 'products'}} for your selection
            </span>
            <span *ngIf="!isLoadingProducts && customeBannerList.length === 0" class="no-results-text">
              <i class="bi bi-exclamation-circle me-2"></i>
              No products found for the selected {{subCatValue ? 'subcategory' : 'category'}}
            </span>
          </div>
          <div class="selection-info" *ngIf="!selectedMainCategory">
            <i class="bi bi-info-circle me-2"></i>
            Please select a category to view available products
          </div>
        </div>
      </div>
    </div>

    <!-- Completely Redesigned Products Display with Fixed Card Grid and Proper Centering -->
    <div class="products-display-redesigned" *ngIf="selectedMainCategory">
      <!-- Loading State -->
      <div class="loading-state" *ngIf="isLoadingProducts">
        <div class="loading-spinner">
          <i class="bi bi-hourglass-split"></i>
        </div>
        <p>Loading products...</p>
      </div>
      
      <!-- Products Grid/Slider -->
      <div class="products-container-redesigned" *ngIf="!isLoadingProducts && customeBannerList.length > 0">
        <div class="products-slider-redesigned">
          <ngx-slick-carousel [config]="slideConfigRedesigned" class="products-carousel-redesigned">
            <div ngxSlickItem *ngFor="let item of customeBannerList; trackBy: trackByProductId" class="product-slide-redesigned">
              <div class="product-card-redesigned">
                <div class="product-image-container-redesigned">
                  <img [src]="item?.product_images?.[0] || 'assets/images/placeholder-product.jpg'" 
                       [alt]="item?.productname" 
                       class="product-image-redesigned"
                       (error)="onImageError($event)" />
                  <div class="product-overlay-redesigned">
                    <button class="btn btn-light quick-view-btn-redesigned" 
                            (click)="quickViewProduct(item)">
                      <i class="bi bi-eye me-1"></i>
                      Quick View
                    </button>
                  </div>
                  <div class="product-badge-redesigned" *ngIf="item?.isNew">
                    <span>New</span>
                  </div>
                </div>
                
                <div class="product-content-redesigned">
                  <h6 class="product-title-redesigned" [title]="item?.productname">
                    {{item?.productname}}
                  </h6>
                  
                  <div class="product-rating-redesigned">
                    <div class="rating-stars-redesigned">
                      <i class="bi bi-star-fill" *ngFor="let star of getStarArray(item?.rating || 4.5)"></i>
                      <i class="bi bi-star-half" *ngIf="hasHalfStar(item?.rating || 4.5)"></i>
                      <i class="bi bi-star" *ngFor="let star of getEmptyStarArray(item?.rating || 4.5)"></i>
                    </div>
                    <span class="rating-value-redesigned">({{item?.rating || '4.5'}})</span>
                  </div>
                  
                  <div class="product-price-redesigned">
                    <span class="price-label-redesigned">Starting at</span>
                    <span class="price-value-redesigned">₹{{item?.price || '0.00'}}</span>
                  </div>
                  
                  <a [routerLink]="['/product-details', item._id]" 
                     class="btn btn-primary product-btn-redesigned">
                    <span>Customize Now</span>
                    <i class="bi bi-arrow-right ms-1"></i>
                  </a>
                </div>
              </div>
            </div>
          </ngx-slick-carousel>
        </div>
      </div>
      
      <!-- No Products State -->
      <div class="no-products-state" *ngIf="!isLoadingProducts && customeBannerList.length === 0">
        <div class="no-products-icon">
          <i class="bi bi-box-seam"></i>
        </div>
        <h5>No Products Found</h5>
        <p>We couldn't find any products for the selected {{subCatValue ? 'subcategory' : 'category'}}.</p>
        <button class="btn btn-outline-primary" (click)="resetFilters()">
          <i class="bi bi-arrow-clockwise me-2"></i>
          Reset Filters
        </button>
      </div>
    </div>
    
    <!-- Initial State -->
    <div class="initial-state" *ngIf="!selectedMainCategory">
      <div class="initial-state-icon">
        <i class="bi bi-funnel"></i>
      </div>
      <h5>Select a Category</h5>
      <p>Choose a category above to explore our amazing collection of custom signs and displays.</p>
    </div>
  </div>
</section>

<!-- Design Process Section -->
<section class="design-process-section">
  <div class="container">
    <div class="process-container">
      <div class="process-grid">
        <div class="process-item">
          <div class="process-icon">
            <i class="bi bi-palette"></i>
          </div>
          <div class="process-content">
            <h6 class="process-title">Design Template</h6>
            <span class="process-subtitle">Professionally Designed</span>
          </div>
        </div>
        <div class="process-item">
          <div class="process-icon">
            <i class="bi bi-upload"></i>
          </div>
          <div class="process-content">
            <h6 class="process-title">Upload Artwork</h6>
            <span class="process-subtitle">Perfect Print</span>
          </div>
        </div>
        <div class="process-item">
          <div class="process-icon">
            <i class="bi bi-person-workspace"></i>
          </div>
          <div class="process-content">
            <h6 class="process-title">Hire a Designer</h6>
            <span class="process-subtitle">Starts <strong>₹9.99</strong></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Best Sellers Categories -->
<section class="categories-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Our Best Sellers</h2>
      <p class="section-subtitle">Boost Sales with Top-Charting Categories</p>
    </div>
    <div class="categories-grid">
      <div class="category-item" *ngFor="let item of mainCategory">
        <a [routerLink]="['/product-list', item.slug]" [queryParams]="{ category: item._id }" class="category-link">
          <div class="category-card">
            <div class="category-image">
              <img [src]="item?.image" [alt]="item?.name" />
            </div>
            <div class="category-info">
              <h6 class="category-name">{{item?.name}}</h6>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Promotional Banners -->
<section class="promo-banners-section">
  <div class="container">
    <div class="promo-grid">
      <div class="promo-item">
        <div class="promo-banner">
          <img src="assets/images/promo-banner-1.jpg" alt="Promo Banner 1" />
        </div>
      </div>
      <div class="promo-item">
        <div class="promo-banner">
          <img src="assets/images/promo-banner-2.jpg" alt="Promo Banner 2" />
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Customer Picks - Completely Redesigned -->
<section class="customer-picks-section">
  <div class="container">
    <div class="section-header-with-action">
      <div class="section-info">
        <h2 class="section-title">Customer Picks</h2>
        <p class="section-subtitle">Explore Our Most Popular Products</p>
      </div>
      <button class="btn btn-outline-primary" routerLink="/product-list">
        <span>View All</span>
        <i class="bi bi-arrow-right ms-1"></i>
      </button>
    </div>
    
    <!-- Redesigned Customer Picks Grid -->
    <div class="customer-picks-grid">
      <div class="customer-pick-item" *ngFor="let item of mostPopular">
        <div class="customer-pick-card">
          <div class="pick-image-container">
            <img [src]="item?.product_images?.[0]" [alt]="item?.productname" class="pick-image" />
            <div class="pick-badge">
              <i class="bi bi-heart-fill"></i>
            </div>
          </div>
          <div class="pick-content">
            <h6 class="pick-title">{{item?.productname}}</h6>
            <div class="pick-rating">
              <div class="rating-stars">
                <i class="bi bi-star-fill" *ngFor="let star of [1,2,3,4]"></i>
                <i class="bi bi-star-half"></i>
              </div>
              <span class="rating-count">(4.5)</span>
            </div>
            <div class="pick-pricing">
              <span class="current-price">₹{{item?.price}}</span>
              <span class="original-price">₹7.59</span>
              <span class="discount-badge">Save 20%</span>
            </div>
            <a [routerLink]="['/product-details', item._id]" class="btn btn-primary pick-btn">
              <span>Add to Cart</span>
              <i class="bi bi-cart-plus ms-1"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Most Loved Products - Fixed Card Sizes and Dots -->
<section class="most-loved-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Most Loved Products</h2>
    </div>
    
    <div class="loved-products-slider-container">
      <div class="loved-products-slider-wrapper">
        <ngx-slick-carousel [config]="slideConfigForML" class="loved-products-carousel">
          <div ngxSlickItem *ngFor="let item of mostLoved" class="loved-product-slide">
            <div class="loved-product-card-fixed">
              <div class="loved-product-image-fixed">
                <img [src]="item?.product_images?.[0] || 'assets/images/placeholder-product.jpg'" 
                     [alt]="item?.productname" 
                     (error)="onImageError($event)" />
              </div>
              <div class="loved-product-content-fixed">
                <h6 class="loved-product-title-fixed">{{item?.productname}}</h6>
                <div class="loved-product-price-fixed">
                  <span class="price-label">Starts at</span>
                  <span class="price-value">₹{{item?.price}}</span>
                </div>
                <div class="loved-product-rating-fixed">
                  <div class="rating-stars">
                    <i class="bi bi-star-fill" *ngFor="let star of [1,2,3,4]"></i>
                    <i class="bi bi-star-half"></i>
                  </div>
                  <span class="rating-text">({{item?.rating || '4.5'}}/5)</span>
                </div>
                <a [routerLink]="['/product-details', item._id]" class="btn btn-primary loved-product-btn-fixed">
                  <span>View Details</span>
                  <i class="bi bi-arrow-right"></i>
                </a>
              </div>
            </div>
          </div>
        </ngx-slick-carousel>
      </div>
    </div>
  </div>
</section>

<!-- Blog Section -->
<section class="blog-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Check out our Blog For Printing Tips & Suggestions</h2>
    </div>
    
    <!-- Loading State -->
    <div class="loading-state text-center py-5" *ngIf="isLoadingBlogs">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3">Loading blogs...</p>
    </div>
    
    <div class="blog-grid" *ngIf="!isLoadingBlogs && allBlogs.length > 0">
      <div class="blog-item" *ngFor="let item of allBlogs">
        <div class="blog-card">
          <div class="blog-image">
            <img [src]="item.image || 'assets/images/placeholder-blog.jpg'" 
                 [alt]="item.title" 
                 (error)="onImageError($event)" />
          </div>
          <div class="blog-content">
            <h6 class="blog-title">{{item.title}}</h6>
            <p class="blog-excerpt">{{item.description | slice:0:100}}...</p>
            <div class="blog-footer">
              <a [routerLink]="['/blog-details', item._id]" class="btn btn-primary blog-btn">
                <span>Read more</span>
                <i class="bi bi-arrow-right ms-1"></i>
              </a>
              <span class="blog-date">{{item.updatedAt | date:'shortDate'}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Empty State -->
    <div class="empty-state text-center py-5" *ngIf="!isLoadingBlogs && allBlogs.length === 0">
      <i class="bi bi-journal-text" style="font-size: 3rem; color: #6c757d;"></i>
      <p class="mt-3 text-muted">No blogs available at the moment</p>
    </div>
    
    <div class="section-footer" *ngIf="!isLoadingBlogs">
      <button class="btn btn-outline-primary" routerLink="/blogs">
        <span>View All</span>
        <i class="bi bi-arrow-right ms-1"></i>
      </button>
    </div>
  </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
  <div class="container">
    <div class="newsletter-container">
      <div class="newsletter-content">
        <div class="newsletter-text">
          <h5 class="newsletter-title">Subscribe to our newsletter and get 20% OFF on Your First Order + Free Shipping.</h5>
        </div>
        <div class="newsletter-form">
          <div class="input-group">
            <input type="email" [(ngModel)]="email" placeholder="Enter your email" class="form-control newsletter-input" />
            <button class="btn btn-light newsletter-btn" (click)="submit()">
              <span>SUBSCRIBE</span>
              <i class="bi bi-arrow-right ms-1"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
