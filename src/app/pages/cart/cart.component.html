<div class="cart-page">
  <!-- Features Bar -->
  <div class="features-bar">
    <div class="container">
      <div class="row">
        <div class="col-6 col-md-3 text-center">
          <div class="feature-item">
            <i class="bi bi-shield-check"></i>
            <span>Quality Guarantee</span>
          </div>
        </div>
        <div class="col-6 col-md-3 text-center">
          <div class="feature-item">
            <i class="bi bi-tag"></i>
            <span>Best Prices</span>
          </div>
        </div>
        <div class="col-6 col-md-3 text-center">
          <div class="feature-item">
            <i class="bi bi-truck"></i>
            <span>Free Shipping</span>
          </div>
        </div>
        <div class="col-6 col-md-3 text-center">
          <div class="feature-item">
            <i class="bi bi-palette"></i>
            <span>Free Design Proofs</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container my-5">
    <!-- Page Header -->
    <div class="text-center mb-5">
      <h1 class="page-title">Shopping Cart</h1>
      <p class="text-muted">Review your items before checkout</p>
    </div>

    <div class="row">
      <!-- Cart Items Section -->
      <div class="col-lg-8">
        <div class="cart-header d-flex justify-content-between align-items-center mb-4">
          <h3 class="section-title">Your Cart: {{cartItems}} Items</h3>
          <a href="#" class="continue-shopping-link">
            <i class="bi bi-arrow-left me-2"></i>Continue Shopping
          </a>
        </div>

        <!-- Cart Items -->
        <div class="cart-items">
          <div class="cart-item" *ngFor="let item of allData; index as k">
            <div class="card border-0 shadow-sm mb-4">
              <div class="card-body p-4">
                <div class="row align-items-center">
                  <!-- Product Image -->
                  <div class="col-md-2">
                    <div class="product-image-wrapper">
                      <img *ngIf="item.upload_art_image" 
                           [src]="gs.imageUrl + item.upload_art_image"
                           class="img-fluid rounded" 
                           alt="Product Image">
                      <img *ngIf="!item.upload_art_image" 
                           src="assets/images/sendartworklater.png"
                           class="img-fluid rounded" 
                           alt="Send Artwork Later">
                    </div>
                  </div>

                  <!-- Product Details -->
                  <div class="col-md-5">
                    <h5 class="product-name mb-2">{{item.product_id.productname}}</h5>
                    <div class="product-specs">
                      <p class="spec-item mb-1">
                        <span class="text-muted">Size (W X H):</span> 8 Ft x 8 Ft (FT) | ₹{{item.single_price}}
                      </p>
                      <p class="spec-item mb-1">
                        <span class="text-muted">Side:</span> Single Sided
                      </p>
                      <p class="spec-item mb-3">
                        <span class="text-muted">Patterns:</span> 1 Logo Basic
                      </p>
                    </div>

                    <!-- Bulk Pricing Table -->
                    <div class="bulk-pricing-table">
                      <table class="table table-sm">
                        <thead>
                          <tr>
                            <th>Qty:</th>
                            <td *ngFor="let data of item.product_id.bulk_qty">{{data.qty}}</td>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th>Discount:</th>
                            <td *ngFor="let data of item.product_id.bulk_qty">{{data.discount}}%</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>

                  <!-- Quantity Controls -->
                  <div class="col-md-2">
                    <div class="quantity-controls text-center">
                      <label class="form-label mb-2">Qty</label>
                      <div class="input-group">
                        <button class="btn btn-outline-secondary" 
                                type="button" 
                                (click)="changeQty(item, k, 'minus')">
                          <i class="bi bi-dash"></i>
                        </button>
                        <input type="text" 
                               class="form-control text-center" 
                               [value]="item.qty" 
                               readonly>
                        <button class="btn btn-outline-secondary" 
                                type="button" 
                                (click)="changeQty(item, k, 'plus')">
                          <i class="bi bi-plus"></i>
                        </button>
                      </div>
                    </div>
                  </div>

                  <!-- Price & Actions -->
                  <div class="col-md-2">
                    <div class="text-end">
                      <h5 class="item-price mb-2">₹{{item.after_discount_price}}</h5>
                      <p class="delivery-info text-muted small mb-3">
                        Estimated delivery<br>Wed, Nov 8th 2023
                      </p>
                      <button class="btn btn-outline-danger btn-sm" 
                              (click)="deleteCart(item, k)">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary Sidebar -->
      <div class="col-lg-4">
        <div class="order-summary-card">
          <div class="card shadow-sm">
            <div class="card-header bg-light">
              <h5 class="mb-0">Order Summary</h5>
            </div>
            <div class="card-body">
              <!-- Proof Request -->
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="proofRequest">
                <label class="form-check-label" for="proofRequest">
                  Proof Request
                </label>
              </div>

              <!-- Coupon Section -->
              <div class="coupon-section mb-4">
                <h6 class="section-subtitle mb-3">Apply Discount Code</h6>
                <div class="input-group">
                  <input type="text" 
                         class="form-control" 
                         [(ngModel)]="coupon_code" 
                         name="coupon_code"
                         placeholder="Enter coupon code">
                  <button class="btn btn-primary" 
                          type="button" 
                          (click)="applyCoupon()">
                    Apply
                  </button>
                </div>
              </div>

              <!-- Shipping Estimation -->
              <div class="shipping-section mb-4">
                <div class="accordion" id="shippingAccordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button collapsed" 
                              type="button" 
                              data-bs-toggle="collapse" 
                              data-bs-target="#shippingCollapse">
                        Estimate Shipping
                      </button>
                    </h2>
                    <div id="shippingCollapse" 
                         class="accordion-collapse collapse" 
                         data-bs-parent="#shippingAccordion">
                      <div class="accordion-body">
                        <div class="mb-3">
                          <label class="form-label">Country</label>
                          <select class="form-select">
                            <option>Poland</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">State</label>
                          <select class="form-select">
                            <option>Dolnoslaskie</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Postal Code">
                            <button class="btn btn-outline-primary" type="button">Check</button>
                          </div>
                        </div>

                        <!-- Shipping Options -->
                        <div class="shipping-options">
                          <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="shipping" id="priority">
                            <label class="form-check-label d-flex justify-content-between w-100" for="priority">
                              <div>
                                <strong>Priority</strong>
                                <small class="d-block text-muted">Mon, Nov 6th 2023</small>
                              </div>
                              <span class="fw-bold">₹60.82</span>
                            </label>
                          </div>
                          <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="shipping" id="express" checked>
                            <label class="form-check-label d-flex justify-content-between w-100" for="express">
                              <div>
                                <strong>Express</strong>
                                <small class="d-block text-muted">Wed, Nov 8th 2023</small>
                              </div>
                              <span class="fw-bold">₹40.57</span>
                            </label>
                          </div>
                          <div class="form-check">
                            <input class="form-check-input" type="radio" name="shipping" id="supersaver">
                            <label class="form-check-label d-flex justify-content-between w-100" for="supersaver">
                              <div>
                                <strong>Super Saver</strong>
                                <small class="d-block text-muted">Tue, Nov 14th 2023</small>
                              </div>
                              <span class="fw-bold text-success">FREE</span>
                            </label>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Price Breakdown -->
              <div class="price-breakdown">
                <div class="d-flex justify-content-between mb-2">
                  <span>Shipping</span>
                  <span class="text-decoration-line-through text-muted">₹505.70</span>
                </div>
                <small class="text-muted d-block mb-3">
                  Estimated delivery Tue, Nov 14th 2023 - Super Saver
                </small>

                <div class="d-flex justify-content-between mb-2">
                  <span>Exceptional Courier Charges</span>
                  <span>₹505.70</span>
                </div>

                <div *ngIf="couponObj.res" class="text-success mb-3">
                  <small>You will get discount ₹{{couponObj.discount_amount}}</small>
                </div>

                <hr>

                <div class="d-flex justify-content-between mb-2">
                  <span>Subtotal</span>
                  <span>₹{{subtotal}}</span>
                </div>

                <div class="d-flex justify-content-between mb-3">
                  <span>Total Discount</span>
                  <span class="text-danger">-₹{{totalDiscount}}</span>
                </div>

                <div class="d-flex justify-content-between mb-4">
                  <h5>Grand Total:</h5>
                  <h5 class="text-primary">₹{{finalPrice}}</h5>
                </div>

                <!-- Checkout Buttons -->
                <button type="button" 
                        class="btn btn-primary btn-lg w-100 mb-3" 
                        (click)="proceedToCheckout()">
                  <i class="bi bi-credit-card me-2"></i>
                  PROCEED TO CHECKOUT
                </button>

                <div class="text-center mb-3">
                  <span class="text-muted">OR</span>
                </div>

                <button type="button" 
                        class="btn btn-secondary btn-lg w-100 mb-3">
                  <i class="bi bi-amazon me-2"></i>
                  PAY WITH AMAZON
                </button>

                <!-- Security Badge -->
                <div class="text-center">
                  <div class="security-badge">
                    <i class="bi bi-shield-check text-success me-2"></i>
                    <small class="text-muted">Secure Checkout</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recommended Categories -->
    <div class="recommended-section mt-5">
      <div class="text-center mb-4">
        <h3>Recommended Categories</h3>
        <p class="text-muted">More Trending Custom-Built Category by BannerBuzz</p>
      </div>

      <div class="row">
        <div class="col-6 col-md-4 col-lg-2 mb-4" *ngFor="let i of [1,2,3,4,5,6]">
          <div class="category-card">
            <a href="/stands-and-displays" class="text-decoration-none">
              <div class="category-image">
                <img src="assets/images/468.jpg" alt="Category" class="img-fluid rounded">
              </div>
              <p class="category-name text-center mt-3 mb-0">Custom Flags</p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="cart-footer bg-light py-4">
    <div class="container text-center">
      <div class="payment-methods mb-3">
        <i class="bi bi-credit-card fs-1 text-muted me-3"></i>
        <i class="bi bi-paypal fs-1 text-muted me-3"></i>
        <i class="bi bi-apple fs-1 text-muted"></i>
      </div>
      <p class="text-muted small mb-0">© 2009-2023 bannerbuzz.com All rights reserved.</p>
    </div>
  </footer>
</div>
